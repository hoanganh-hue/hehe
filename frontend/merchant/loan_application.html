

Đăng ký vay - ZaloPay Merchant


<main class="main-content">
    <div class="container mt-5 pt-5">
        <!-- Page Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="text-center">
                    <h1 class="text-primary">Đăng ký Vay vốn kinh doanh</h1>
                    <p class="text-muted">Giải pháp tài chính linh hoạt cho doanh nghiệp của bạn</p>
                </div>
            </div>
        </div>

        <!-- Loan Options -->
        <div class="row mb-5">
            <div class="col-lg-4 mb-4">
                <div class="card h-100 loan-option" data-loan-type="individual">
                    <div class="card-body text-center">
                        <div class="loan-icon mb-3">
                            <i class="fas fa-user-tie fa-3x text-primary"></i>
                        </div>
                        <h5 class="card-title">Vay Cá nhân Kinh doanh</h5>
                        <p class="card-text">Dành cho hộ kinh doanh cá thể, shop online nhỏ</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Hạn mức: 10 - 500 triệu</li>
                            <li><i class="fas fa-check text-success me-2"></i>Lãi suất: 0.9%/tháng</li>
                            <li><i class="fas fa-check text-success me-2"></i>Thời hạn: 6 - 36 tháng</li>
                            <li><i class="fas fa-check text-success me-2"></i>Giải ngân nhanh 24h</li>
                        </ul>
                        <button class="btn btn-outline-primary w-100 select-loan-type">Chọn gói này</button>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="card h-100 loan-option border-primary" data-loan-type="business">
                    <div class="card-body text-center">
                        <div class="position-absolute top-0 start-50 translate-middle">
                            <span class="badge bg-primary px-3 py-1">Phổ biến</span>
                        </div>
                        <div class="loan-icon mb-3 mt-3">
                            <i class="fas fa-store fa-3x text-primary"></i>
                        </div>
                        <h5 class="card-title">Vay Hộ Kinh doanh</h5>
                        <p class="card-text">Dành cho các cửa hàng, cơ sở kinh doanh nhỏ</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Hạn mức: 100 triệu - 2 tỷ</li>
                            <li><i class="fas fa-check text-success me-2"></i>Lãi suất: 0.8%/tháng</li>
                            <li><i class="fas fa-check text-success me-2"></i>Thời hạn: 12 - 60 tháng</li>
                            <li><i class="fas fa-check text-success me-2"></i>Tài sản thế chấp linh hoạt</li>
                        </ul>
                        <button class="btn btn-primary w-100 select-loan-type">Chọn gói này</button>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="card h-100 loan-option" data-loan-type="enterprise">
                    <div class="card-body text-center">
                        <div class="loan-icon mb-3">
                            <i class="fas fa-building fa-3x text-primary"></i>
                        </div>
                        <h5 class="card-title">Vay Doanh nghiệp</h5>
                        <p class="card-text">Dành cho công ty, doanh nghiệp lớn</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Hạn mức: 2 - 50 tỷ</li>
                            <li><i class="fas fa-check text-success me-2"></i>Lãi suất: 0.7%/tháng</li>
                            <li><i class="fas fa-check text-success me-2"></i>Thời hạn: 12 - 120 tháng</li>
                            <li><i class="fas fa-check text-success me-2"></i>Ưu đãi cho doanh nghiệp lớn</li>
                        </ul>
                        <button class="btn btn-outline-primary w-100 select-loan-type">Chọn gói này</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Application Form -->
        <div class="row" id="applicationForm" style="display: none;">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">Đơn đăng ký vay vốn</h4>
                        <small class="text-muted">Vui lòng điền đầy đủ thông tin để chúng tôi xử lý nhanh nhất</small>
                    </div>
                    <div class="card-body">
                        <form id="loanApplicationForm">
                            <!-- Loan Type Hidden Field -->
                            <input type="hidden" id="selectedLoanType" name="loan_type">
                            
                            <!-- Basic Information -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">1. Thông tin cơ bản</h5>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Họ và tên <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="full_name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Số điện thoại <span class="text-danger">*</span></label>
                                    <input type="tel" class="form-control" name="phone" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Email <span class="text-danger">*</span></label>
                                    <input type="email" class="form-control" name="email" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">CCCD/CMND <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="id_number" required>
                                </div>
                            </div>

                            <!-- Business Information -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">2. Thông tin kinh doanh</h5>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label class="form-label">Tên doanh nghiệp/Cửa hàng <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="business_name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Mã số thuế</label>
                                    <input type="text" class="form-control" name="tax_code">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Ngành nghề <span class="text-danger">*</span></label>
                                    <select class="form-select" name="business_sector" required>
                                        <option value="">Chọn ngành nghề</option>
                                        <option value="retail">Bán lẻ</option>
                                        <option value="food">Nhà hàng/Ăn uống</option>
                                        <option value="fashion">Thời trang</option>
                                        <option value="technology">Công nghệ</option>
                                        <option value="manufacturing">Sản xuất</option>
                                        <option value="services">Dịch vụ</option>
                                        <option value="other">Khác</option>
                                    </select>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label class="form-label">Địa chỉ kinh doanh <span class="text-danger">*</span></label>
                                    <textarea class="form-control" rows="3" name="business_address" required></textarea>
                                </div>
                            </div>

                            <!-- Loan Information -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">3. Thông tin vay</h5>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Số tiền cần vay <span class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" name="loan_amount" required>
                                        <span class="input-group-text">VNĐ</span>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Thời hạn vay <span class="text-danger">*</span></label>
                                    <select class="form-select" name="loan_term" required>
                                        <option value="">Chọn thời hạn</option>
                                        <option value="6">6 tháng</option>
                                        <option value="12">12 tháng</option>
                                        <option value="24">24 tháng</option>
                                        <option value="36">36 tháng</option>
                                        <option value="48">48 tháng</option>
                                        <option value="60">60 tháng</option>
                                    </select>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label class="form-label">Mục đích sử dụng <span class="text-danger">*</span></label>
                                    <textarea class="form-control" rows="3" name="loan_purpose" required></textarea>
                                </div>
                            </div>

                            <!-- Documents Upload -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h5 class="text-primary mb-3">4. Tài liệu đính kèm</h5>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">CCCD/CMND (mặt trước)</label>
                                    <input type="file" class="form-control" name="id_front" accept="image/*">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">CCCD/CMND (mặt sau)</label>
                                    <input type="file" class="form-control" name="id_back" accept="image/*">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Giấy phép kinh doanh</label>
                                    <input type="file" class="form-control" name="business_license" accept="image/*,.pdf">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Báo cáo tài chính</label>
                                    <input type="file" class="form-control" name="financial_report" accept=".pdf,.xlsx,.xls">
                                </div>
                            </div>

                            <!-- Terms and Submit -->
                            <div class="row">
                                <div class="col-12">
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                                        <label class="form-check-label" for="agreeTerms">
                                            Tôi đồng ý với <a href="#" class="text-primary">Điều khoản và Điều kiện</a> của ZaloPay
                                        </label>
                                    </div>
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-lg px-5">
                                            <i class="fas fa-paper-plane me-2"></i>Gửi đơn đăng ký
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<style>
.loan-option {
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
}

.loan-option:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.loan-option.selected {
    border-color: #007bff !important;
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,123,255,0.3);
}

.loan-icon {
    transition: transform 0.3s ease;
}

.loan-option:hover .loan-icon {
    transform: scale(1.1);
}

.form-control:focus, .form-select:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
}

.card-header {
    background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
    color: white;
}
</style>

<script>
// Handle loan type selection
document.querySelectorAll('.select-loan-type').forEach(button => {
    button.addEventListener('click', function() {
        const card = this.closest('.loan-option');
        const loanType = card.dataset.loanType;
        
        // Remove selected class from all cards
        document.querySelectorAll('.loan-option').forEach(c => c.classList.remove('selected'));
        
        // Add selected class to current card
        card.classList.add('selected');
        
        // Set hidden field value
        document.getElementById('selectedLoanType').value = loanType;
        
        // Show application form
        document.getElementById('applicationForm').style.display = 'block';
        document.getElementById('applicationForm').scrollIntoView({ behavior: 'smooth' });
    });
});

// Handle form submission
document.getElementById('loanApplicationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Show loading state
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Đang xử lý...';
    submitBtn.disabled = true;
    
    // Simulate form submission
    setTimeout(function() {
        alert('Đơn đăng ký của bạn đã được gửi thành công! Chúng tôi sẽ liên hệ với bạn trong vòng 24h.');
        
        // Reset form
        document.getElementById('loanApplicationForm').reset();
        document.getElementById('applicationForm').style.display = 'none';
        document.querySelectorAll('.loan-option').forEach(c => c.classList.remove('selected'));
        
        // Reset button
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }, 2000);
});
</script>

<script src="js/loan-api.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced form submission with API integration
    const form = document.getElementById('loanApplicationForm');
    if (form) {
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            
            try {
                // Show loading
                loanAPI.showLoading(submitBtn);
                
                // Get selected loan type
                const selectedOption = document.querySelector('.loan-option.selected');
                if (!selectedOption) {
                    loanAPI.showError('Vui lòng chọn loại vay');
                    return;
                }
                
                const selectedLoanType = selectedOption.dataset.loanType;
                
                // Collect form data
                const formData = new FormData(form);
                const applicationData = {
                    loan_type: selectedLoanType,
                    business_name: formData.get('business_name'),
                    business_registration: formData.get('business_registration'),
                    contact_person: formData.get('contact_person'),
                    phone_number: formData.get('phone_number'),
                    email: formData.get('email'),
                    address: formData.get('address'),
                    requested_amount: parseFloat(formData.get('requested_amount')),
                    loan_term_months: parseInt(formData.get('loan_term_months')),
                    purpose: formData.get('purpose'),
                    business_type: formData.get('business_type'),
                    industry: formData.get('industry'),
                    years_in_operation: parseInt(formData.get('years_in_operation')),
                    monthly_revenue: parseFloat(formData.get('monthly_revenue')) || null,
                    monthly_expenses: parseFloat(formData.get('monthly_expenses')) || null
                };
                
                // Submit application
                const response = await loanAPI.submitApplication(applicationData);
                
                // Show success message
                loanAPI.showSuccess(response.message);
                
                // Redirect to status page
                setTimeout(() => {
                    window.location.href = `loan_status.html?ref=${response.reference_number}`;
                }, 2000);
                
            } catch (error) {
                console.error('Application submission error:', error);
                loanAPI.showError('Có lỗi xảy ra khi gửi đơn vay. Vui lòng thử lại.');
            } finally {
                // Hide loading
                loanAPI.hideLoading(submitBtn, originalText);
            }
        });
    }
});
</script>
